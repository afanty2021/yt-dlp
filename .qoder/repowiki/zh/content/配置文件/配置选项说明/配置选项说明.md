# 配置选项说明

<cite>
**本文档中引用的文件**
- [options.py](file://yt_dlp/options.py)
- [YoutubeDL.py](file://yt_dlp/YoutubeDL.py)
- [test/test_config.py](file://test/test_config.py)
- [README.md](file://README.md)
</cite>

## 目录
1. [简介](#简介)
2. [配置系统概述](#配置系统概述)
3. [通用选项](#通用选项)
4. [网络配置](#网络配置)
5. [地理限制](#地理限制)
6. [视频选择](#视频选择)
7. [下载选项](#下载选项)
8. [文件系统选项](#文件系统选项)
9. [格式选择](#格式选择)
10. [字幕选项](#字幕选项)
11. [认证选项](#认证选项)
2. [后处理选项](#后处理选项)
3. [工作区选项](#工作区选项)
4. [详细级别选项](#详细级别选项)
5. [缩略图选项](#缩略图选项)
6. [互联网快捷方式选项](#互联网快捷方式选项)
7. [SponsorBlock选项](#sponsorblock选项)
8. [提取器选项](#提取器选项)
9. [兼容性选项](#兼容性选项)
10. [配置文件位置](#配置文件位置)
11. [输出模板](#输出模板)
12. [故障排除指南](#故障排除指南)

## 简介

yt-dlp是一个功能强大的视频下载工具，提供了超过300个配置选项来满足各种下载需求。本参考文档系统性地列出了所有可用的配置参数，包括参数名称、数据类型、默认值、有效取值范围和具体作用。

## 配置系统概述

yt-dlp使用基于optparse的命令行解析器来处理配置选项，支持多种配置来源：

```mermaid
flowchart TD
A["命令行参数"] --> B["配置解析器"]
C["配置文件"] --> B
D["环境变量"] --> B
E["默认值"] --> B
B --> F["参数验证"]
F --> G["最终配置"]
C --> H["用户配置目录"]
C --> I["系统配置目录"]
C --> J["可移植配置"]
C --> K["主目录配置"]
```

**图表来源**
- [options.py](file://yt_dlp/options.py#L81-L110)

### 配置优先级

配置选项按照以下优先级顺序加载：
1. 命令行参数（最高优先级）
2. 可移植配置文件
3. 主目录配置文件
4. 用户配置文件
5. 系统配置文件（最低优先级）

**章节来源**
- [options.py](file://yt_dlp/options.py#L81-L110)

## 通用选项

### 基本控制选项

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--help`, `-h` | 布尔值 | `false` | 显示帮助信息并退出 |
| `--version` | 布尔值 | `false` | 显示程序版本并退出 |
| `--update`, `-U` | 布尔值 | `false` | 检查更新 |
| `--no-update` | 布尔值 | `false` | 不检查更新（默认） |
| `--update-to` | 字符串 | `null` | 升级到指定版本 |

### 错误处理选项

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--ignore-errors`, `-i` | 布尔值 | `false` | 忽略下载和后处理错误 |
| `--no-abort-on-error`, `--abort-on-error` | 枚举 | `'only_download'` | 控制错误处理策略 |

### 提取器控制选项

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--list-extractors` | 布尔值 | `false` | 列出所有支持的提取器 |
| `--extractor-descriptions` | 布尔值 | `false` | 输出提取器描述 |
| `--use-extractors`, `--ies` | 字符串列表 | `[]` | 指定要使用的提取器 |
| `--force-generic-extractor` | 布尔值 | `false` | 强制使用通用提取器 |

### 播放列表处理选项

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--flat-playlist` | 布尔值 | `false` | 不提取播放列表的URL结果条目 |
| `--no-flat-playlist` | 布尔值 | `false` | 完全提取播放列表的视频（默认） |
| `--live-from-start` | 布尔值 | `false` | 从开始下载直播流 |
| `--no-live-from-start` | 布尔值 | `false` | 从当前时间下载直播流（默认） |

### 其他通用选项

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--wait-for-video` | 字符串 | `null` | 等待计划的流变得可用 |
| `--mark-watched` | 布尔值 | `false` | 标记视频为已观看 |
| `--no-mark-watched` | 布尔值 | `false` | 不标记视频为已观看（默认） |
| `--color` | 字典 | `{}` | 控制颜色输出 |
| `--compat-options` | 集合 | `set()` | 兼容性选项 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L352-L520)

## 网络配置

### 代理设置

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--proxy` | 字符串 | `null` | 指定HTTP/HTTPS/SOCKS代理 |
| `--socket-timeout` | 浮点数 | `null` | 连接超时时间（秒） |
| `--source-address` | 字符串 | `null` | 绑定的客户端IP地址 |

### 协议和连接选项

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--impersonate` | 字符串 | `null` | 要模拟的客户端 |
| `--list-impersonate-targets` | 布尔值 | `false` | 列出可用的模拟目标 |
| `--force-ipv4`, `-4` | 布尔值 | `false` | 强制使用IPv4 |
| `--force-ipv6`, `-6` | 布尔值 | `false` | 强制使用IPv6 |
| `--enable-file-urls` | 布尔值 | `false` | 启用file:// URL |

**章节来源**
- [options.py](file://yt_dlp/options.py#L522-L570)

## 地理限制

### 地理绕过选项

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--geo-verification-proxy` | 字符串 | `null` | 用于IP地址验证的代理 |
| `--xff` | 字符串 | `'default'` | X-Forwarded-For头部伪造策略 |
| `--geo-bypass` | 布尔值 | `false` | 绕过地理限制 |
| `--no-geo-bypass` | 布尔值 | `false` | 不绕过地理限制（默认） |
| `--geo-bypass-country` | 字符串 | `null` | 指定国家代码 |
| `--geo-bypass-ip-block` | 字符串 | `null` | 指定IP块范围 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L572-L590)

## 视频选择

### 时间范围过滤

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--date` | 字符串 | `null` | 下载指定日期上传的视频 |
| `--datebefore` | 字符串 | `null` | 下载指定日期或之前上传的视频 |
| `--dateafter` | 字符串 | `null` | 下载指定日期或之后上传的视频 |

### 数量和质量过滤

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--min-filesize` | 字符串 | `null` | 最小文件大小 |
| `--max-filesize` | 字符串 | `null` | 最大文件大小 |
| `--min-views` | 整数 | `null` | 最小观看次数 |
| `--max-views` | 整数 | `null` | 最大观看次数 |
| `--age-limit` | 整数 | `null` | 年龄限制 |

### 过滤器选项

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--match-filters` | 字符串列表 | `null` | 视频过滤器表达式 |
| `--no-match-filters` | 布尔值 | `false` | 不使用匹配过滤器 |
| `--break-match-filters` | 字符串列表 | `null` | 匹配失败时停止下载 |
| `--no-break-match-filters` | 布尔值 | `false` | 不使用断路过滤器 |

### 播放列表选择

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--playlist-start` | 整数 | `1` | 播放列表起始索引 |
| `--playlist-end` | 整数 | `null` | 播放列表结束索引 |
| `--playlist-items` | 字符串 | `null` | 指定的播放列表项目 |
| `--match-title` | 字符串 | `null` | 标题匹配正则表达式 |
| `--reject-title` | 字符串 | `null` | 排除标题的正则表达式 |

### 归档和重复处理

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--download-archive` | 字符串 | `null` | 下载归档文件 |
| `--no-download-archive` | 布尔值 | `false` | 不使用下载归档（默认） |
| `--max-downloads` | 整数 | `null` | 最大下载数量 |
| `--break-on-existing` | 布尔值 | `false` | 遇到现有文件时停止 |
| `--no-break-on-existing` | 布尔值 | `false` | 不在遇到现有文件时停止 |
| `--break-on-reject` | 布尔值 | `false` | 被拒绝时停止 |
| `--break-per-input` | 布尔值 | `false` | 每个输入URL重置计数器 |
| `--no-break-per-input` | 布尔值 | `false` | 整个下载队列终止 |
| `--skip-playlist-after-errors` | 整数 | `null` | 失败后跳过播放列表 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L592-L680)

## 下载选项

### 并发和重试设置

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--concurrent-fragments`, `-N` | 整数 | `1` | 并发片段下载数量 |
| `--limit-rate`, `--rate-limit`, `-r` | 字符串 | `null` | 最大下载速率 |
| `--throttled-rate` | 字符串 | `null` | 节流最小速率 |
| `--retries`, `-R` | 字符串 | `'10'` | 重试次数 |
| `--file-access-retries` | 字符串 | `'3'` | 文件访问重试次数 |
| `--fragment-retries` | 字符串 | `'10'` | 片段重试次数 |
| `--retry-sleep` | 字典 | `{}` | 重试间隔时间 |
| `--skip-unavailable-fragments`, `--abort-on-unavailable-fragments` | 布尔值 | `true` | 处理不可用片段 |
| `--no-skip-unavailable-fragments`, `--abort-on-unavailable-fragments` | 布尔值 | `false` | 中止不可用片段 |
| `--keep-fragments` | 布尔值 | `false` | 保留下载的片段 |
| `--no-keep-fragments` | 布尔值 | `false` | 删除下载的片段（默认） |

### 缓冲和分块设置

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--buffer-size` | 字符串 | `'1024'` | 下载缓冲区大小 |
| `--resize-buffer` | 布尔值 | `true` | 自动调整缓冲区大小 |
| `--no-resize-buffer` | 布尔值 | `false` | 不自动调整缓冲区大小 |
| `--http-chunk-size` | 字符串 | `null` | HTTP分块大小 |

### 播放列表处理

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--playlist-reverse` | 布尔值 | `false` | 播放列表反向下载 |
| `--no-playlist-reverse` | 布尔值 | `false` | 不反向下载（默认） |
| `--playlist-random` | 布尔值 | `false` | 播放列表随机下载 |
| `--lazy-playlist` | 布尔值 | `false` | 懒惰播放列表处理 |
| `--no-lazy-playlist` | 布尔值 | `false` | 正常播放列表处理（默认） |

### HLS和DASH处理

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--hls-prefer-native` | 布尔值 | `null` | 优先使用原生HLS下载器 |
| `--hls-prefer-ffmpeg` | 布尔值 | `null` | 优先使用FFmpeg处理HLS |
| `--hls-use-mpegts` | 布尔值 | `null` | 使用MPEGTS容器 |
| `--no-hls-use-mpegts` | 布尔值 | `false` | 不使用MPEGTS容器 |
| `--download-sections` | 字符串列表 | `null` | 下载特定章节 |
| `--downloader`, `--external-downloader` | 字典 | `{}` | 外部下载器 |
| `--downloader-args`, `--external-downloader-args` | 字典 | `{}` | 外部下载器参数 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L682-L780)

## 文件系统选项

### 批处理和输入

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--batch-file`, `-a` | 字符串 | `null` | 包含URL的批处理文件 |
| `--no-batch-file` | 布尔值 | `false` | 不从批处理文件读取URL |

### 路径和输出

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--paths`, `-P` | 字典 | `{}` | 文件路径映射 |
| `--output`, `-o` | 字符串 | `{}` | 输出模板 |
| `--output-na-placeholder` | 字符串 | `'NA'` | 无效字段占位符 |
| `--autonumber-size` | 整数 | `null` | 自动编号大小 |
| `--autonumber-start` | 整数 | `1` | 自动编号起始值 |

### 文件名处理

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--restrict-filenames` | 布尔值 | `false` | 限制文件名为ASCII字符 |
| `--no-restrict-filenames` | 布尔值 | `false` | 允许Unicode字符（默认） |
| `--windows-filenames` | 布尔值 | `null` | 强制Windows兼容文件名 |
| `--no-windows-filenames` | 布尔值 | `false` | 最小化文件名清理 |
| `--trim-filenames`, `--trim-file-names` | 整数 | `0` | 限制文件名长度 |

### 文件覆盖和续传

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--no-overwrites`, `-w` | 布尔值 | `null` | 不覆盖任何文件 |
| `--force-overwrites`, `--yes-overwrites` | 布尔值 | `false` | 覆盖所有文件 |
| `--no-force-overwrites` | 布尔值 | `null` | 不覆盖视频文件 |
| `--continue`, `-c` | 布尔值 | `true` | 恢复部分下载 |
| `--no-continue` | 布尔值 | `false` | 不恢复部分下载 |
| `--part` | 布尔值 | `false` | 使用.part文件 |
| `--no-part` | 布尔值 | `false` | 不使用.part文件 |

### 元数据文件

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--mtime` | 布尔值 | `null` | 使用Last-modified头设置修改时间 |
| `--no-mtime` | 布尔值 | `false` | 不使用Last-modified头（默认） |
| `--write-description` | 布尔值 | `false` | 写入视频描述到.description文件 |
| `--no-write-description` | 布尔值 | `false` | 不写入视频描述（默认） |
| `--write-info-json` | 布尔值 | `null` | 写入视频元数据到.info.json文件 |
| `--no-write-info-json` | 布尔值 | `false` | 不写入视频元数据（默认） |
| `--write-playlist-metafiles` | 布尔值 | `null` | 写入播放列表元数据 |
| `--no-write-playlist-metafiles` | 布尔值 | `false` | 不写入播放列表元数据 |
| `--clean-info-json`, `--clean-infojson` | 布尔值 | `null` | 清理infojson中的内部元数据 |
| `--no-clean-info-json`, `--no-clean-infojson` | 布尔值 | `false` | 保持所有infojson字段 |
| `--write-comments`, `--get-comments` | 布尔值 | `false` | 获取视频评论 |
| `--no-write-comments`, `--no-get-comments` | 布尔值 | `false` | 不获取视频评论 |
| `--load-info-json` | 字符串 | `null` | 加载infojson文件 |
| `--cookies` | 字符串 | `null` | Netscape格式的cookies文件 |
| `--no-cookies` | 布尔值 | `false` | 不读取/写入cookies文件 |
| `--cookies-from-browser` | 字符串 | `null` | 从浏览器加载cookies |
| `--no-cookies-from-browser` | 布尔值 | `false` | 不从浏览器加载cookies |
| `--cache-dir` | 字符串 | `null` | 缓存目录位置 |
| `--no-cache-dir` | 布尔值 | `false` | 禁用文件系统缓存 |
| `--rm-cache-dir` | 布尔值 | `false` | 删除所有缓存文件 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L782-L950)

## 格式选择

### 基本格式选择

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--format`, `-f` | 字符串 | `null` | 视频格式代码 |
| `--all-formats` | 布尔值 | `false` | 下载所有可用格式 |
| `--list-formats`, `-F` | 布尔值 | `false` | 列出可用格式 |
| `--list-formats-as-table` | 布尔值 | `true` | 以表格形式显示格式列表 |
| `--list-formats-old`, `--no-list-formats-as-table` | 布尔值 | `false` | 以旧格式显示格式列表 |

### 格式排序

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--format-sort`, `-S` | 字符串列表 | `[]` | 格式排序规则 |
| `--format-sort-force`, `--S-force` | 布尔值 | `false` | 强制用户指定的排序 |
| `--no-format-sort-force` | 布尔值 | `false` | 用户排序有优先权（默认） |

### 多流处理

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--video-multistreams` | 布尔值 | `null` | 允许多个视频流合并 |
| `--no-video-multistreams` | 布尔值 | `false` | 只下载一个视频流 |
| `--audio-multistreams` | 布尔值 | `null` | 允许多个音频流合并 |
| `--no-audio-multistreams` | 布尔值 | `false` | 只下载一个音频流 |

### 格式检查

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--check-formats` | 枚举 | `null` | 检查格式可下载性 |
| `--check-all-formats` | 布尔值 | `false` | 检查所有格式 |
| `--no-check-formats` | 布尔值 | `false` | 不检查格式 |
| `--allow-unplayable-formats` | 布尔值 | `false` | 允许不可播放格式 |
| `--no-allow-unplayable-formats` | 布尔值 | `false` | 不允许不可播放格式 |

### 容器和编解码器

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--merge-output-format` | 字符串 | `null` | 合并输出格式 |
| `--prefer-free-formats` | 布尔值 | `false` | 优先使用免费容器 |
| `--no-prefer-free-formats` | 布尔值 | `false` | 不特别偏好免费容器 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L800-L870)

## 字幕选项

### 字幕下载

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--write-subs`, `--write-srt` | 布尔值 | `false` | 写入字幕文件 |
| `--no-write-subs`, `--no-write-srt` | 布尔值 | `false` | 不写入字幕文件（默认） |
| `--write-auto-subs`, `--write-automatic-subs` | 布尔值 | `false` | 写入自动生成的字幕 |
| `--no-write-auto-subs`, `--no-write-automatic-subs` | 布尔值 | `false` | 不写入自动生成的字幕（默认） |
| `--all-subs` | 布尔值 | `false` | 下载所有字幕（已弃用） |
| `--list-subs` | 布尔值 | `false` | 列出可用字幕 |
| `--sub-format` | 字符串 | `'best'` | 字幕格式 |
| `--sub-langs`, `--srt-langs` | 字符串列表 | `[]` | 字幕语言 |

### 字幕处理

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--embed-subs` | 布尔值 | `false` | 将字幕嵌入视频 |
| `--no-embed-subs` | 布尔值 | `false` | 不嵌入字幕（默认） |
| `--convert-subs`, `--convert-sub`, `--convert-subtitles` | 字符串 | `null` | 转换字幕格式 |
| `--no-convert-subs` | 布尔值 | `false` | 不转换字幕（默认） |

**章节来源**
- [options.py](file://yt_dlp/options.py#L872-L900)

## 认证选项

### 基本认证

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--username`, `-u` | 字符串 | `null` | 登录账户ID |
| `--password`, `-p` | 字符串 | `null` | 账户密码 |
| `--twofactor`, `-2` | 字符串 | `null` | 两因素认证码 |
| `--netrc`, `-n` | 布尔值 | `false` | 使用.netrc认证 |
| `--netrc-location` | 字符串 | `null` | .netrc认证数据位置 |
| `--netrc-cmd` | 字符串 | `null` | 获取凭据的命令 |

### 视频密码

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--video-password` | 字符串 | `null` | 视频特定密码 |

### Adobe Pass认证

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--ap-mso` | 字符串 | `null` | Adobe Pass多系统运营商标识 |
| `--ap-username` | 字符串 | `null` | 多系统运营商账户登录 |
| `--ap-password` | 字符串 | `null` | 多系统运营商账户密码 |
| `--ap-list-mso` | 布尔值 | `false` | 列出所有支持的多系统运营商 |

### 客户端证书

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--client-certificate` | 字符串 | `null` | 客户端证书文件路径 |
| `--client-certificate-key` | 字符串 | `null` | 客户端证书私钥文件路径 |
| `--client-certificate-password` | 字符串 | `null` | 客户端证书私钥密码 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L902-L950)

## 后处理选项

### 音频提取

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--extract-audio`, `-x` | 布尔值 | `false` | 将视频文件转换为音频文件 |
| `--audio-format` | 字符串 | `'best'` | 音频转换格式 |
| `--audio-quality` | 字符串 | `'5'` | 音频质量设置 |

### 视频处理

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--remux-video` | 字符串 | `null` | 重新混流视频格式 |
| `--recode-video` | 字符串 | `null` | 重新编码视频格式 |
| `--keep-video` | 布尔值 | `false` | 保留中间视频文件 |
| `--no-keep-video` | 布尔值 | `false` | 删除中间视频文件（默认） |
| `--post-overwrites` | 布尔值 | `false` | 覆盖后处理文件 |
| `--no-post-overwrites` | 布尔值 | `false` | 不覆盖后处理文件 |

### 元数据嵌入

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--embed-metadata`, `--add-metadata` | 布尔值 | `false` | 嵌入元数据到视频文件 |
| `--no-embed-metadata`, `--no-add-metadata` | 布尔值 | `false` | 不添加元数据（默认） |
| `--embed-chapters`, `--add-chapters` | 布尔值 | `null` | 添加章节标记 |
| `--no-embed-chapters`, `--no-add-chapters` | 布尔值 | `false` | 不添加章节标记（默认） |
| `--embed-info-json` | 布尔值 | `null` | 将infojson作为附件嵌入 |
| `--no-embed-info-json` | 布尔值 | `false` | 不嵌入infojson |
| `--embed-thumbnail` | 布尔值 | `false` | 将缩略图嵌入为封面艺术 |
| `--no-embed-thumbnail` | 布尔值 | `false` | 不嵌入缩略图（默认） |

### 元数据处理

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--metadata-from-title` | 字符串 | `null` | 从标题解析元数据 |
| `--parse-metadata` | 字符串 | `null` | 解析额外的元数据 |
| `--replace-in-metadata` | 字符串 | `null` | 在元数据中替换文本 |
| `--xattrs`, `--xattr` | 布尔值 | `false` | 将元数据写入xattrs |

### 播放列表处理

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--concat-playlist` | 字符串 | `'multi_video'` | 连接播放列表视频 |

### 文件修复

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--fixup` | 字符串 | `null` | 自动修复已知文件故障 |

### 后处理执行

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--ffmpeg-location` | 字符串 | `null` | FFmpeg二进制文件位置 |
| `--postprocessor-args`, `--ppa` | 字典 | `{}` | 后处理器参数 |
| `--exec` | 字符串 | `null` | 执行命令 |
| `--no-exec` | 布尔值 | `false` | 移除先前定义的--exec |
| `--exec-before-download` | 字符串 | `null` | 下载前执行命令 |
| `--no-exec-before-download` | 布尔值 | `false` | 不在下载前执行命令 |

### 分割和章节

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--split-chapters`, `--split-tracks` | 布尔值 | `false` | 基于内部章节分割视频 |
| `--no-split-chapters`, `--no-split-tracks` | 布尔值 | `false` | 不基于章节分割（默认） |
| `--remove-chapters` | 字符串列表 | `null` | 移除匹配正则表达式的章节 |
| `--no-remove-chapters` | 布尔值 | `false` | 不移除任何章节 |
| `--force-keyframes-at-cuts` | 布尔值 | `false` | 强制在切割处使用关键帧 |
| `--no-force-keyframes-at-cuts` | 布尔值 | `false` | 不强制关键帧（默认） |

### 自定义后处理器

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--use-postprocessor` | 字符串列表 | `[]` | 启用插件后处理器 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L952-L1150)

## 工作区选项

### 通用工作区

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--encoding` | 字符串 | `null` | 强制指定编码（实验性） |
| `--legacy-server-connect` | 布尔值 | `false` | 允许不支持安全重协商的服务器连接 |
| `--no-check-certificates` | 布尔值 | `false` | 抑制HTTPS证书验证 |
| `--prefer-insecure`, `--prefer-unsecure` | 布尔值 | `false` | 使用未加密连接获取视频信息 |
| `--user-agent` | 字符串 | `null` | 自定义User-Agent |
| `--referer` | 字符串 | `null` | 自定义Referer |
| `--add-headers` | 字符串 | `null` | 指定自定义HTTP头 |
| `--bidi-workaround` | 布尔值 | `false` | 修复双向文本支持问题 |
| `--sleep-requests` | 浮点数 | `null` | 数据提取期间请求间休眠时间 |
| `--sleep-interval`, `--min-sleep-interval` | 浮点数 | `null` | 下载前最小休眠时间 |
| `--max-sleep-interval` | 浮点数 | `null` | 最大休眠时间 |
| `--sleep-subtitles` | 整数 | `0` | 字幕下载前休眠时间 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L1152-L1200)

## 详细级别选项

### 输出控制

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--quiet`, `-q` | 布尔值 | `null` | 激活安静模式 |
| `--no-quiet` | 布尔值 | `false` | 取消安静模式（默认） |
| `--no-warnings` | 布尔值 | `false` | 忽略警告 |
| `--simulate`, `-s` | 布尔值 | `null` | 不下载视频且不写入任何内容 |
| `--no-simulate` | 布尔值 | `false` | 下载视频（默认） |
| `--ignore-no-formats-error` | 布尔值 | `false` | 忽略"无视频格式"错误 |
| `--no-ignore-no-formats-error` | 布尔值 | `false` | 抛出格式错误（默认） |
| `--skip-download`, `--no-download` | 布尔值 | `false` | 不下载视频但写入相关文件 |
| `--force-write-archive`, `--force-write-download-archive`, `--force-download-archive` | 布尔值 | `false` | 强制写入下载归档 |

### 输出模板

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--print`, `-O` | 字符串 | `null` | 打印字段或输出模板 |
| `--print-to-file` | 字符串 | `null` | 将模板追加到文件 |
| `--get-url`, `-g` | 布尔值 | `false` | 获取视频URL |
| `--get-title`, `-e` | 布尔值 | `false` | 获取视频标题 |
| `--get-id` | 布尔值 | `false` | 获取视频ID |
| `--get-thumbnail` | 布尔值 | `false` | 获取缩略图URL |
| `--get-description` | 布尔值 | `false` | 获取视频描述 |
| `--get-duration` | 布尔值 | `false` | 获取视频时长 |
| `--get-filename` | 布尔值 | `false` | 获取文件名 |
| `--get-format` | 布尔值 | `false` | 获取格式信息 |
| `--dump-json`, `-j` | 布尔值 | `false` | 静默打印JSON信息 |
| `--dump-single-json`, `-J` | 布尔值 | `false` | 静默打印单个JSON信息 |
| `--print-json` | 布尔值 | `false` | 打印JSON信息 |
| `--newline` | 布尔值 | `false` | 新行输出进度条 |
| `--no-progress` | 布尔值 | `null` | 不显示进度条 |
| `--progress` | 布尔值 | `false` | 显示进度条（即使在安静模式下） |
| `--console-title` | 布尔值 | `false` | 在控制台标题栏显示进度 |
| `--progress-template` | 字符串 | `null` | 进度输出模板 |
| `--progress-delta` | 浮点数 | `0` | 进度输出时间间隔 |

### 调试选项

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--verbose`, `-v` | 布尔值 | `false` | 打印各种调试信息 |
| `--dump-pages` | 布尔值 | `false` | 打印编码页面以调试问题 |
| `--write-pages` | 布尔值 | `false` | 将下载的中间页面写入文件 |
| `--load-pages` | 布尔值 | `false` | 从文件加载页面（已弃用） |
| `--print-traffic` | 布尔值 | `false` | 显示发送和接收的HTTP流量 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L1202-L1350)

## 缩略图选项

### 缩略图下载

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--write-thumbnail` | 布尔值 | `false` | 将缩略图图像写入磁盘 |
| `--no-write-thumbnail` | 布尔值 | `false` | 不将缩略图图像写入磁盘（默认） |
| `--write-all-thumbnails` | 布尔值 | `false` | 将所有缩略图格式写入磁盘 |
| `--list-thumbnails` | 布尔值 | `false` | 列出每个视频的可用缩略图 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L1352-L1365)

## 互联网快捷方式选项

### 快捷方式创建

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--write-link` | 布尔值 | `false` | 写入互联网快捷方式文件 |
| `--write-url-link` | 布尔值 | `false` | 写入Windows .url快捷方式 |
| `--write-webloc-link` | 布尔值 | `false` | 写入macOS .webloc快捷方式 |
| `--write-desktop-link` | 布尔值 | `false` | 写入Linux .desktop快捷方式 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L1367-L1380)

## SponsorBlock选项

### 赞助内容处理

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--sponsorblock-mark` | 集合 | `set()` | 创建章节的SponsorBlock类别 |
| `--sponsorblock-remove` | 集合 | `set()` | 从视频中移除的SponsorBlock类别 |
| `--sponsorblock-chapter-title` | 字符串 | `DEFAULT_SPONSORBLOCK_CHAPTER_TITLE` | SponsorBlock章节标题模板 |
| `--no-sponsorblock` | 布尔值 | `false` | 禁用SponsorBlock标记和移除 |
| `--sponsorblock-api` | 字符串 | `'https://sponsor.ajay.app'` | SponsorBlock API位置 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L1382-L1420)

## 提取器选项

### 提取器行为

| 参数 | 类型 | 默认值 | 描述 |
|------|------|--------|------|
| `--extractor-retries` | 字符串 | `'3'` | 提取器错误重试次数 |
| `--allow-dynamic-mpd`, `--no-ignore-dynamic-mpd` | 布尔值 | `true` | 处理动态DASH清单 |
| `--ignore-dynamic-mpd`, `--no-allow-dynamic-mpd` | 布尔值 | `false` | 不处理动态DASH清单 |
| `--hls-split-discontinuity` | 布尔值 | `false` | 在不连续处拆分HLS播放列表 |
| `--no-hls-split-discontinuity` | 布尔值 | `false` | 不拆分HLS播放列表（默认） |
| `--extractor-args` | 字典 | `{}` | 提取器参数 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L1422-L1450)

## 兼容性选项

### 兼容性设置

yt-dlp提供了广泛的兼容性选项来保持与youtube-dl和youtube-dlc的向后兼容性：

| 兼容性选项 | 描述 |
|------------|------|
| `--compat-options all` | 使用所有兼容性选项（**不要使用！**） |
| `--compat-options youtube-dl` | 与youtube-dl相同 |
| `--compat-options youtube-dlc` | 与youtube-dlc相同 |
| `--compat-options 2021` | 2021年版本兼容性 |
| `--compat-options 2022` | 2022年版本兼容性 |
| `--compat-options 2023` | 2023年版本兼容性 |
| `--compat-options 2024` | 2024年版本兼容性 |

### 支持的兼容性选项

| 选项 | 描述 |
|------|------|
| `filename` | 文件名标准化 |
| `filename-sanitization` | 文件名清理 |
| `format-sort` | 格式排序 |
| `abort-on-error` | 错误中止 |
| `format-spec` | 格式规范 |
| `no-playlist-metafiles` | 播放列表元文件 |
| `multistreams` | 多流 |
| `no-live-chat` | 直播聊天 |
| `playlist-index` | 播放列表索引 |
| `list-formats` | 格式列表 |
| `no-direct-merge` | 直接合并 |
| `playlist-match-filter` | 播放列表匹配过滤器 |
| `no-attach-info-json` | 附加info-json |
| `embed-thumbnail-atomicparsley` | 嵌入缩略图AtomicParsley |
| `no-external-downloader-progress` | 外部下载器进度 |
| `embed-metadata` | 嵌入元数据 |
| `seperate-video-versions` | 分离视频版本 |
| `no-clean-infojson` | 清理infojson |
| `no-keep-subs` | 保持字幕 |
| `no-certifi` | certifi |
| `no-youtube-channel-redirect` | YouTube频道重定向 |
| `no-youtube-unavailable-videos` | YouTube不可用视频 |
| `no-youtube-prefer-utc-upload-date` | YouTube UTC上传日期 |
| `prefer-legacy-http-handler` | 传统HTTP处理器 |
| `manifest-filesize-approx` | 清单文件大小近似 |
| `allow-unsafe-ext` | 允许不安全扩展 |
| `prefer-vp9-sort` | VP9排序偏好 |
| `mtime-by-default` | 默认修改时间 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L400-L450)
- [README.md](file://README.md#L2257-L2300)

## 配置文件位置

### 配置文件层次结构

yt-dlp按照以下优先级顺序查找配置文件：

```mermaid
flowchart TD
A["命令行参数"] --> B["配置解析"]
C["可移植配置<br/>executable_path/yt-dlp.conf"] --> B
D["主目录配置<br/>expand_path(home)/yt-dlp.conf"] --> B
E["用户配置<br/>~/.config/yt-dlp.conf"] --> B
F["用户配置<br/>~/.config/yt-dlp/config"] --> B
G["用户配置<br/>~/.config/yt-dlp/config.txt"] --> B
H["用户配置<br/>~/.yt-dlp/config"] --> B
I["用户配置<br/>~/.yt-dlp/config.txt"] --> B
J["系统配置<br/>/etc/yt-dlp.conf"] --> B
K["系统配置<br/>/etc/yt-dlp/config"] --> B
L["系统配置<br/>/etc/yt-dlp/config.txt"] --> B
B --> M["最终配置"]
```

**图表来源**
- [options.py](file://yt_dlp/options.py#L81-L110)

### 配置文件选项

| 参数 | 类型 | 描述 |
|------|------|------|
| `--ignore-config`, `--no-config` | 布尔值 | 不加载任何配置文件 |
| `--no-config-locations` | 布尔值 | 不加载自定义配置文件（默认） |
| `--config-locations` | 字符串列表 | 配置文件位置 |

**章节来源**
- [options.py](file://yt_dlp/options.py#L428-L456)

## 输出模板

### 模板语法

输出模板使用Python字符串格式化语法，支持复杂的文件名生成：

| 模板元素 | 描述 | 示例 |
|----------|------|------|
| `%%` | 百分号转义 | `%` |
| `%(fieldname)s` | 字段值 | `%(title)s` |
| `%(fieldname)d` | 数字格式 | `%(duration)d` |
| `%(fieldname)04d` | 填充数字 | `%(playlist_index)04d` |
| `%(fieldname|default)s` | 默认值 | `%(uploader|unknown)s` |
| `%(fieldname,alternate)s` | 替代值 | `%(title,alt_title)s` |
| `%(fieldname&replacement)s` | 替换值 | `%(title&cleaned)s` |

### 支持的字段类型

| 字段类型 | 描述 |
|----------|------|
| `video` | 视频相关字段 |
| `playlist` | 播放列表相关字段 |
| `infojson` | 元数据字段 |
| `thumbnail` | 缩略图字段 |
| `description` | 描述字段 |
| `chapter` | 章节字段 |

### 输出模板示例

```bash
# 基本模板
-o "%(title)s.%(ext)s"

# 播放列表模板
-o "%(playlist)s/%(playlist_index)s - %(title)s.%(ext)s"

# 带时间戳的模板
-o "%(upload_date)s - %(title)s.%(ext)s"

# Windows兼容模板
-o "%(title)s [%(id)s].%(ext)s"
```

**章节来源**
- [YoutubeDL.py](file://yt_dlp/YoutubeDL.py#L1451-L1478)
- [README.md](file://README.md#L1423-L1431)

## 故障排除指南

### 常见配置问题

#### 1. 代理设置问题
```bash
# 正确的代理格式
--proxy http://proxy.example.com:8080
--proxy socks5://user:pass@127.0.0.1:1080
```

#### 2. 文件名冲突
```bash
# 避免文件名冲突
--restrict-filenames
--trim-filenames 100
--output "%(title).100s [%(id)s].%(ext)s"
```

#### 3. 格式选择问题
```bash
# 下载最佳质量
-f "bestvideo[ext=mp4]+bestaudio[ext=m4a]/best[ext=mp4]/best"

# 仅音频
-f "bestaudio"

# 特定分辨率
-f "best[height<=1080]"
```

#### 4. 网络连接问题
```bash
# 设置超时
--socket-timeout 30

# 使用代理
--proxy http://proxy.example.com:8080

# 绕过地理限制
--geo-bypass
```

### 性能优化

#### 1. 并发下载
```bash
# 增加并发片段下载
-N 4

# 限制总下载速度
-r 1M
```

#### 2. 缓存优化
```bash
# 设置缓存目录
--cache-dir "/path/to/cache"

# 禁用缓存（如果需要）
--no-cache-dir
```

#### 3. 内存使用
```bash
# 调整缓冲区大小
--buffer-size 512K

# 不调整缓冲区大小
--no-resize-buffer
```

### 调试技巧

#### 1. 启用详细输出
```bash
-v  # 详细输出
--verbose  # 更详细的调试信息
--print-traffic  # 显示HTTP流量
```

#### 2. 测试配置
```bash
# 模拟下载而不实际下载
-s

# 列出可用格式
-F

# 显示JSON信息
-j
```

#### 3. 配置验证
```bash
# 检查配置文件
--ignore-config

# 使用特定配置文件
--config-locations "/path/to/config"
```

**章节来源**
- [test/test_config.py](file://test/test_config.py#L115-L163)

## 结论

yt-dlp提供了极其丰富的配置选项，涵盖了从基本下载到高级后处理的各种需求。通过合理配置这些选项，用户可以实现个性化的下载体验，满足不同场景下的特殊要求。

建议用户根据具体需求选择合适的配置选项，并在使用新选项时参考官方文档以确保正确配置。